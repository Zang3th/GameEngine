name: Static analysis

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  static_analysis:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Run static analysis
        uses: JacobDomagala/StaticAnalysis@master
        with:
          use_cmake: true
          apt_pckgs: "software-properties-common libglu1-mesa-dev mesa-common-dev" # Additional apt packages
          clang_tidy_args: "-checks='*,google-*"
          cppcheck_args: "${Project_root_dir}/Apps ${Project_root_dir}/Engine --enable=all --suppress=cstyleCast --suppress=unusedFunction --suppress=missingInclude --suppress=unknownMacro"